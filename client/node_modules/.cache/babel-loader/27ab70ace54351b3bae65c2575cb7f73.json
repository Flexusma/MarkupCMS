{"remainingRequest":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js!B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!B:\\Gitkraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","dependencies":[{"path":"B:\\Gitkraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","mtime":1608918167962},{"path":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQjovR2l0a3Jha2VuL01hcmt1cENNUy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAiQC9hdXRoL2F1dGhTZXJ2aWNlIjsKaW1wb3J0IFBlcm1pc3Npb24gZnJvbSAiQC9hdXRoL3Blcm1pc3Npb24iOwpleHBvcnQgdmFyIGF1dGhHdWFyZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQsIHBlcm0pIHsKICAgIHZhciByZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICghKHBlcm0gIT09IHVuZGVmaW5lZCkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2UuaXNBdXRoVXNlcigpOwoKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgIGlmICghcmVzLmlzQXV0aCkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIVBlcm1pc3Npb24uaGFzUGVybWlzc2lvbihyZXMudXNlci5wZXJtaXNzaW9uKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgbmFtZTogImxvZ2luIgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgIHJldHVybiBBdXRoU2VydmljZS5yb3V0ZUF1dGhDaGVjayhuZXh0KTsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIGF1dGhHdWFyZChfeCwgX3gyLCBfeDMsIF94NCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7"},{"version":3,"sources":["B:/Gitkraken/MarkupCMS/client/src/auth/authGuard.js"],"names":["AuthService","Permission","authGuard","to","from","next","perm","undefined","isAuthUser","res","isAuth","hasPermission","user","permission","name","routeAuthCheck"],"mappings":";;AAAA,OAAOA,WAAP,MAAwB,oBAAxB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AAGA,OAAO,IAAMC,SAAS;AAAA,qEAAG,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB,EAAuBC,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACdA,IAAI,KAAGC,SADO;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAEOP,WAAW,CAACQ,UAAZ,EAFP;;AAAA;AAELC,YAAAA,GAFK;;AAAA,iBAGNA,GAAG,CAACC,MAHE;AAAA;AAAA;AAAA;;AAAA,iBAIET,UAAU,CAACU,aAAX,CAAyBF,GAAG,CAACG,IAAJ,CAASC,UAAlC,CAJF;AAAA;AAAA;AAAA;;AAKOR,YAAAA,IAAI;AALX;;AAAA;AASTA,YAAAA,IAAI,CAAC;AAACS,cAAAA,IAAI,EAAE;AAAP,aAAD,CAAJ;AATS;AAAA;;AAAA;AAAA;AAAA,mBAYXd,WAAW,CAACe,cAAZ,CAA2BV,IAA3B,CAZW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATH,SAAS;AAAA;AAAA;AAAA,GAAf","sourcesContent":["import AuthService from \"@/auth/authService\";\r\nimport Permission from \"@/auth/permission\";\r\n\r\n\r\nexport const authGuard = async (to, from, next, perm) => {\r\n        if(perm!==undefined){\r\n                let res = await AuthService.isAuthUser();\r\n                if(res.isAuth){\r\n                        if(Permission.hasPermission(res.user.permission)){\r\n                                next();\r\n                                return;\r\n                        }\r\n                }\r\n                next({name: \"login\"});\r\n\r\n        }else\r\n        await AuthService.routeAuthCheck(next);\r\n\r\n};\r\n\r\n"]}]}