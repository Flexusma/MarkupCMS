{"remainingRequest":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","dependencies":[{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","mtime":1605795717302},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkID0gcmVxdWlyZSgiQzovVXNlcnMvY3JhZnQvT25lRHJpdmUgLSB3aWxsaWdpcy1vbmxpbmUuZGUvRG9rdW1lbnRlL0dpdEtyYWtlbi9NYXJrdXBDTVMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlV2lsZGNhcmQiKTsKCnZhciBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0ID0gcmVxdWlyZSgiQzovVXNlcnMvY3JhZnQvT25lRHJpdmUgLSB3aWxsaWdpcy1vbmxpbmUuZGUvRG9rdW1lbnRlL0dpdEtyYWtlbi9NYXJrdXBDTVMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmF1dGhHdWFyZCA9IGV4cG9ydHMuQXV0aEF4aW9zID0gdm9pZCAwOwoKcmVxdWlyZSgicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIik7Cgp2YXIgX2FzeW5jVG9HZW5lcmF0b3IyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJDOi9Vc2Vycy9jcmFmdC9PbmVEcml2ZSAtIHdpbGxpZ2lzLW9ubGluZS5kZS9Eb2t1bWVudGUvR2l0S3Jha2VuL01hcmt1cENNUy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiKSk7Cgp2YXIgYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKCJjb3JlLWpzL2ludGVybmFscy9pbnRlcm5hbC1zdGF0ZSIpKTsKCnZhciBfbWFpbiA9IHJlcXVpcmUoIkAvbWFpbiIpOwoKdmFyIF9yb3V0ZXJfdXRpbHMgPSByZXF1aXJlKCJAL3JvdXRlci9yb3V0ZXJfdXRpbHMiKTsKCnZhciBBdXRoQXhpb3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfQXV0aEF4aW9zID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoYXhpb3MsIG5leHQpIHsKICAgIHZhciByZXNwOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGF4aW9zOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICBpZiAoIShyZXNwLmluZm8uY29kZSA9PT0gNjAxKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAobmV4dCAhPT0gdW5kZWZpbmVkKSBuZXh0KHsKICAgICAgICAgICAgICBuYW1lOiAibG9naW4iCiAgICAgICAgICAgIH0pO2Vsc2UgdGhpcy5yb3V0ZXIucHVzaCgibG9naW4iKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgcmVzcCk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogIH0pKTsKCiAgZnVuY3Rpb24gQXV0aEF4aW9zKF94LCBfeDIpIHsKICAgIHJldHVybiBfQXV0aEF4aW9zLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfQoKICByZXR1cm4gQXV0aEF4aW9zOwp9KCk7CgpleHBvcnRzLkF1dGhBeGlvcyA9IEF1dGhBeGlvczsKCnZhciBhdXRoR3VhcmQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gKDAsIF9hc3luY1RvR2VuZXJhdG9yMi5kZWZhdWx0KSggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHRvLCBmcm9tLCBuZXh0KSB7CiAgICB2YXIgYXg7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBheCA9IGF4aW9zLmdldChfbWFpbi5hcGkuYXBpX2Jhc2VfdXJsICsgX21haW4uYXBpLmFwaV90b2tlbl9jaGVja191cmwpOwogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIEF1dGhBeGlvcyhheCwgbmV4dCk7CgogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQyLnQxID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgaWYgKCEoX2NvbnRleHQyLnQwICE9PSBfY29udGV4dDIudDEpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbmV4dCgpOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAvL2p1c3QgaW4gY2FzZSBBdXRoQXhpb3MgZmFpbHMKICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgbmFtZTogImxvZ2luIgogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEzOwogICAgICAgICAgICBfY29udGV4dDIudDIgPSBfY29udGV4dDJbImNhdGNoIl0oMSk7CiAgICAgICAgICAgICgwLCBfcm91dGVyX3V0aWxzLk5leHRFcnJvclJlZGlyKShfbWFpbi5lcnJvcl9tc2cuY291bGRfbm90X3ZlcmlmeV9sb2dpbi5jb2RlLCBfbWFpbi5lcnJvcl9tc2cuY291bGRfbm90X3ZlcmlmeV9sb2dpbi5tZXNzYWdlKTsKCiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1sxLCAxM11dKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBhdXRoR3VhcmQoX3gzLCBfeDQsIF94NSkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7CgpleHBvcnRzLmF1dGhHdWFyZCA9IGF1dGhHdWFyZDs="},{"version":3,"sources":["C:/Users/craft/OneDrive - willigis-online.de/Dokumente/GitKraken/MarkupCMS/client/src/auth/authGuard.js"],"names":["AuthAxios","axios","next","resp","info","code","undefined","name","router","push","authGuard","to","from","ax","get","api","api_base_url","api_token_check_url","error_msg","could_not_verify_login","message"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA,IAAMA,SAAS;AAAA,yFAAG,iBAAyBC,KAAzB,EAA+BC,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEED,KAFF;;AAAA;AAEVE,YAAAA,IAFU;;AAAA,kBAGXA,IAAI,CAACC,IAAL,CAAUC,IAAV,KAAiB,GAHN;AAAA;AAAA;AAAA;;AAIV,gBAAGH,IAAI,KAAGI,SAAV,EACIJ,IAAI,CAAC;AAACK,cAAAA,IAAI,EAAC;AAAN,aAAD,CAAJ,CADJ,KAGI,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,OAAjB;AAPM;AAAA;;AAAA;AAAA,6CASPN,IATO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,WAAkBH,SAAlB;AAAA;AAAA;;AAAA,SAAkBA,SAAlB;AAAA,GAAf;;;;AAiBO,IAAMU,SAAS;AAAA,mFAAG,kBAAOC,EAAP,EAAWC,IAAX,EAAiBV,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAEfW,YAAAA,EAFe,GAEVZ,KAAK,CAACa,GAAN,CAAUC,UAAIC,YAAJ,GAAiBD,UAAIE,mBAA/B,CAFU;AAAA;AAAA;AAAA,mBAILjB,SAAS,CAACa,EAAD,EAAKX,IAAL,CAJJ;;AAAA;AAAA;AAAA,2BAImBI,SAJnB;;AAAA;AAAA;AAAA;AAAA;;AAKXJ,YAAAA,IAAI;AALO;AAAA;;AAAA;AAOX;AACAA,YAAAA,IAAI,CAAC;AAACK,cAAAA,IAAI,EAAE;AAAP,aAAD,CAAJ;;AARW;AAAA;AAAA;;AAAA;AAAA;AAAA;AAWf,8CAAeW,gBAAUC,sBAAV,CAAiCd,IAAhD,EAAqDa,gBAAUC,sBAAV,CAAiCC,OAAtF;;AAXe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATV,SAAS;AAAA;AAAA;AAAA,GAAf","sourcesContent":["import * as axios from \"core-js/internals/internal-state\";\r\nimport {api, error_msg} from \"@/main\";\r\nimport {NextErrorRedir} from \"@/router/router_utils\";\r\n\r\nconst AuthAxios = async function AuthAxios(axios,next){\r\n\r\n    let resp= await axios;\r\n    if(resp.info.code===601){\r\n        if(next!==undefined)\r\n            next({name:\"login\"});\r\n        else\r\n            this.router.push(\"login\");\r\n    } else\r\n    return resp;\r\n\r\n\r\n}\r\n\r\nexport {AuthAxios}\r\n\r\n\r\nexport const authGuard = async (to, from, next) => {\r\n\r\n      let ax = axios.get(api.api_base_url+api.api_token_check_url);\r\n      try {\r\n          if (await AuthAxios(ax, next) !== undefined) {\r\n              next();\r\n          } else {\r\n              //just in case AuthAxios fails\r\n              next({name: \"login\"});\r\n          }\r\n      }catch (e){\r\n          NextErrorRedir(error_msg.could_not_verify_login.code,error_msg.could_not_verify_login.message);\r\n      }\r\n\r\n\r\n};\r\n\r\n"]}]}