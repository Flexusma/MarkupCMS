{"remainingRequest":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\thread-loader\\dist\\cjs.js!B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js!B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!B:\\Gitkraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","dependencies":[{"path":"B:\\Gitkraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","mtime":1608920045870},{"path":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"B:\\Gitkraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQjovR2l0a3Jha2VuL01hcmt1cENNUy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgQXV0aFNlcnZpY2UgZnJvbSAiQC9hdXRoL2F1dGhTZXJ2aWNlIjsKaW1wb3J0IFBlcm1pc3Npb24gZnJvbSAiQC9hdXRoL3Blcm1pc3Npb24iOwpleHBvcnQgdmFyIGF1dGhHdWFyZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBwZXJtLCByZXM7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHBlcm0gPSB0by5tZXRhLnBlcm1pc3Npb247CgogICAgICAgICAgICBpZiAoIShwZXJtICE9PSB1bmRlZmluZWQpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIEF1dGhTZXJ2aWNlLmlzQXV0aFVzZXIoKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgICAgICBpZiAoIXJlcy5pc0F1dGgpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy51c2VyLnBlcm1pc3Npb24gKyAifCIgKyBwZXJtKTsKCiAgICAgICAgICAgIGlmICghUGVybWlzc2lvbi5oYXNQZXJtaXNzaW9uKHJlcy51c2VyLnBlcm1pc3Npb24sIHBlcm0pKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgIG5hbWU6ICJsb2dpbiIKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICByZXR1cm4gQXV0aFNlcnZpY2Uucm91dGVBdXRoQ2hlY2sobmV4dCk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBhdXRoR3VhcmQoX3gsIF94MiwgX3gzKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTs="},{"version":3,"sources":["B:/Gitkraken/MarkupCMS/client/src/auth/authGuard.js"],"names":["AuthService","Permission","authGuard","to","from","next","perm","meta","permission","undefined","isAuthUser","res","console","log","isAuth","user","hasPermission","name","routeAuthCheck"],"mappings":";;AAAA,OAAOA,WAAP,MAAwB,oBAAxB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AAGA,OAAO,IAAMC,SAAS;AAAA,qEAAG,iBAAOC,EAAP,EAAWC,IAAX,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,YAAAA,IADW,GACJH,EAAE,CAACI,IAAH,CAAQC,UADJ;;AAAA,kBAEdF,IAAI,KAAGG,SAFO;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAGOT,WAAW,CAACU,UAAZ,EAHP;;AAAA;AAGLC,YAAAA,GAHK;AAITC,YAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AAJS,iBAKNA,GAAG,CAACG,MALE;AAAA;AAAA;AAAA;;AAMDF,YAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACI,IAAJ,CAASP,UAAT,GAAoB,GAApB,GAAwBF,IAApC;;AANC,iBAOEL,UAAU,CAACe,aAAX,CAAyBL,GAAG,CAACI,IAAJ,CAASP,UAAlC,EAA8CF,IAA9C,CAPF;AAAA;AAAA;AAAA;;AAQOD,YAAAA,IAAI;AARX;;AAAA;AAYTA,YAAAA,IAAI,CAAC;AAACY,cAAAA,IAAI,EAAE;AAAP,aAAD,CAAJ;AAZS;AAAA;;AAAA;AAAA;AAAA,mBAeXjB,WAAW,CAACkB,cAAZ,CAA2Bb,IAA3B,CAfW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATH,SAAS;AAAA;AAAA;AAAA,GAAf","sourcesContent":["import AuthService from \"@/auth/authService\";\r\nimport Permission from \"@/auth/permission\";\r\n\r\n\r\nexport const authGuard = async (to, from, next) => {\r\n        const perm = to.meta.permission;\r\n        if(perm!==undefined){\r\n                let res = await AuthService.isAuthUser();\r\n                console.log(res)\r\n                if(res.isAuth){\r\n                        console.log(res.user.permission+\"|\"+perm)\r\n                        if(Permission.hasPermission(res.user.permission, perm)){\r\n                                next();\r\n                                return;\r\n                        }\r\n                }\r\n                next({name: \"login\"});\r\n\r\n        }else\r\n        await AuthService.routeAuthCheck(next);\r\n\r\n};\r\n\r\n\r\n"]}]}