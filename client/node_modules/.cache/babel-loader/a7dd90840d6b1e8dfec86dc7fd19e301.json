{"remainingRequest":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\src\\auth\\authService.js","dependencies":[{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\src\\auth\\authService.js","mtime":1605912473770},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvY3JhZnQvT25lRHJpdmUgLSB3aWxsaWdpcy1vbmxpbmUuZGUvRG9rdW1lbnRlL0dpdEtyYWtlbi9NYXJrdXBDTVMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9jcmFmdC9PbmVEcml2ZSAtIHdpbGxpZ2lzLW9ubGluZS5kZS9Eb2t1bWVudGUvR2l0S3Jha2VuL01hcmt1cENNUy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJDOi9Vc2Vycy9jcmFmdC9PbmVEcml2ZSAtIHdpbGxpZ2lzLW9ubGluZS5kZS9Eb2t1bWVudGUvR2l0S3Jha2VuL01hcmt1cENNUy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJDOi9Vc2Vycy9jcmFmdC9PbmVEcml2ZSAtIHdpbGxpZ2lzLW9ubGluZS5kZS9Eb2t1bWVudGUvR2l0S3Jha2VuL01hcmt1cENNUy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IHsgYXBpLCBjb25zdGFudCwgZXJyb3JfbXNnIH0gZnJvbSAiQC9tYWluIjsKaW1wb3J0IHsgTmV4dEVycm9yUmVkaXIgfSBmcm9tICJAL3JvdXRlci9yb3V0ZXJfdXRpbHMiOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwoKdmFyIEF1dGhTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBdXRoU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoU2VydmljZSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJpc0F1dGhlbnRpY2F0ZWQiLCBmYWxzZSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoQXV0aFNlcnZpY2UsIFt7CiAgICBrZXk6ICJsb2dpblJlZGlyZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpblJlZGlyZWN0KCkgewogICAgICB0aGlzLnJvdXRlci5wdXNoKCJsb2dpbiIpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvZ291dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbG9nb3V0KG9iaikgewogICAgICB2YXIgbG9nb3V0ID0gYXhpb3MoewogICAgICAgIG1ldGhvZDogJ2RlbGV0ZScsCiAgICAgICAgdXJsOiBhcGkuYXBpX2Jhc2VfdXJsICsgYXBpLmFwaV9zZXNzaW9uX3BhdGgKICAgICAgfSk7CiAgICAgIHRoaXMuYXV0aEF4aW9zTm9SZWQobG9nb3V0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmluZm8uY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICBBdXRoU2VydmljZUluc3RhbmNlLmlzQXV0aGVudGljYXRlZCA9IGZhbHNlOwoKICAgICAgICAgIGlmIChvYmogIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBpZiAob2JqLnJldHVyblRvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICB0aGlzLnJvdXRlci5wdXNoKG9iai5yZXR1cm5Ubyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIucHVzaChjb25zdGFudC5ob21lX3BhZ2VfbmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJvdXRlQXV0aENoZWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcm91dGVBdXRoQ2hlY2sgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUobmV4dCkgewogICAgICAgIHZhciBheDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBheCA9IGF4aW9zLmdldChhcGkuYXBpX2Jhc2VfdXJsICsgYXBpLmFwaV90b2tlbl9jaGVja191cmwpOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmF1dGhBeGlvcyhheCwgbmV4dCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQxID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgICAgIGlmICghKF9jb250ZXh0LnQwICE9PSBfY29udGV4dC50MSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIC8vanVzdCBpbiBjYXNlIEF1dGhBeGlvcyBmYWlscwogICAgICAgICAgICAgICAgbmV4dCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6ICJsb2dpbiIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTM7CiAgICAgICAgICAgICAgICBfY29udGV4dC50MiA9IF9jb250ZXh0WyJjYXRjaCJdKDEpOwogICAgICAgICAgICAgICAgTmV4dEVycm9yUmVkaXIoZXJyb3JfbXNnLmNvdWxkX25vdF92ZXJpZnlfbG9naW4uY29kZSwgZXJyb3JfbXNnLmNvdWxkX25vdF92ZXJpZnlfbG9naW4ubWVzc2FnZSwgbmV4dCk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzLCBbWzEsIDEzXV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByb3V0ZUF1dGhDaGVjayhfeCkgewogICAgICAgIHJldHVybiBfcm91dGVBdXRoQ2hlY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJvdXRlQXV0aENoZWNrOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYXV0aEF4aW9zIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYXV0aEF4aW9zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihheGlvLCBuZXh0KSB7CiAgICAgICAgdmFyIHJlc3A7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXNwID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCEocmVzcC5pbmZvLmNvZGUgPT09IDYwMSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEobmV4dCAhPT0gdW5kZWZpbmVkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG5leHQoewogICAgICAgICAgICAgICAgICBuYW1lOiAibG9naW4iCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBmYWxzZSk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLnB1c2goImxvZ2luIik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZmFsc2UpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYXV0aEF4aW9zKF94MiwgX3gzKSB7CiAgICAgICAgcmV0dXJuIF9hdXRoQXhpb3MuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGF1dGhBeGlvczsKICAgIH0oKQogIH0sIHsKICAgIGtleTogImF1dGhBeGlvc05vUmVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYXV0aEF4aW9zTm9SZWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGF4aW8pIHsKICAgICAgICB2YXIgcmVzcDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW87CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXNwKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gYXV0aEF4aW9zTm9SZWQoX3g0KSB7CiAgICAgICAgcmV0dXJuIF9hdXRoQXhpb3NOb1JlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gYXV0aEF4aW9zTm9SZWQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJheGlvc05vQ3JlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2F4aW9zTm9DcmVkID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNChheGlvKSB7CiAgICAgICAgdmFyIHJlc3A7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGF4aW8ud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpbzsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcCA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBheGlvc05vQ3JlZChfeDUpIHsKICAgICAgICByZXR1cm4gX2F4aW9zTm9DcmVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBheGlvc05vQ3JlZDsKICAgIH0oKQogIH1dKTsKCiAgcmV0dXJuIEF1dGhTZXJ2aWNlOwp9KCk7Cgp2YXIgQXV0aFNlcnZpY2VJbnN0YW5jZSA9IG5ldyBBdXRoU2VydmljZSgpOwpleHBvcnQgZGVmYXVsdCBBdXRoU2VydmljZUluc3RhbmNlOwpleHBvcnQgZnVuY3Rpb24gaW5pdEF1dGhTZXJ2aWNlKHZ1ZSkgewogIHZ1ZS5wcm90b3R5cGUuJGF1dGggPSBBdXRoU2VydmljZUluc3RhbmNlOwp9"},{"version":3,"sources":["C:/Users/craft/OneDrive - willigis-online.de/Dokumente/GitKraken/MarkupCMS/client/src/auth/authService.js"],"names":["api","constant","error_msg","NextErrorRedir","axios","AuthService","router","push","obj","logout","method","url","api_base_url","api_session_path","authAxiosNoRed","then","res","info","code","AuthServiceInstance","isAuthenticated","undefined","returnTo","home_page_name","next","ax","get","api_token_check_url","authAxios","name","could_not_verify_login","message","axio","resp","withCredentials","initAuthService","vue","prototype","$auth"],"mappings":";;;;;AAAA,SAAQA,GAAR,EAAaC,QAAb,EAAuBC,SAAvB,QAAuC,QAAvC;AACA,SAAQC,cAAR,QAA6B,uBAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;;IAEMC,W;;;;6CAEgB,K;;;;;oCAEH;AACX,WAAKC,MAAL,CAAYC,IAAZ,CAAiB,OAAjB;AACH;;;2BAEMC,G,EAAI;AAEP,UAAIC,MAAM,GAAGL,KAAK,CAAC;AACfM,QAAAA,MAAM,EAAE,QADO;AAEfC,QAAAA,GAAG,EAAEX,GAAG,CAACY,YAAJ,GAAiBZ,GAAG,CAACa;AAFX,OAAD,CAAlB;AAKA,WAAKC,cAAL,CAAoBL,MAApB,EAA4BM,IAA5B,CAAiC,UAAUC,GAAV,EAAc;AAC3C,YAAGA,GAAG,CAACC,IAAJ,CAASC,IAAT,KAAgB,GAAnB,EAAwB;AACpBC,UAAAA,mBAAmB,CAACC,eAApB,GAAoC,KAApC;;AACA,cAAIZ,GAAG,KAAKa,SAAZ,EAAuB;AACnB,gBAAIb,GAAG,CAACc,QAAJ,KAAiBD,SAArB,EAAgC;AAC5B,mBAAKf,MAAL,CAAYC,IAAZ,CAAiBC,GAAG,CAACc,QAArB;AACH,aAFD,MAEO;AACH,mBAAKhB,MAAL,CAAYC,IAAZ,CAAiBN,QAAQ,CAACsB,cAA1B;AACH;AACJ;AACJ;AACJ,OAXD;AAcH;;;;qGAEoBC,I;;;;;;AACbC,gBAAAA,E,GAAKrB,KAAK,CAACsB,GAAN,CAAU1B,GAAG,CAACY,YAAJ,GAAiBZ,GAAG,CAAC2B,mBAA/B,C;;;uBAEK,KAAKC,SAAL,CAAeH,EAAf,EAAmBD,IAAnB,C;;;;8BAA2BH,S;;;;;;;AACjCG,gBAAAA,IAAI;;;;;AAEJ;AACAA,gBAAAA,IAAI,CAAC;AAACK,kBAAAA,IAAI,EAAE;AAAP,iBAAD,CAAJ;;;;;;;;;AAGJ1B,gBAAAA,cAAc,CAACD,SAAS,CAAC4B,sBAAV,CAAiCZ,IAAlC,EAAuChB,SAAS,CAAC4B,sBAAV,CAAiCC,OAAxE,EAAgFP,IAAhF,CAAd;;;;;;;;;;;;;;;;;;;iGAIQQ,I,EAAKR,I;;;;;;;uBACDQ,I;;;AAAZC,gBAAAA,I;;sBACDA,IAAI,CAAChB,IAAL,CAAUC,IAAV,KAAiB,G;;;;;sBACbM,IAAI,KAAGH,S;;;;;AACNG,gBAAAA,IAAI,CAAC;AAACK,kBAAAA,IAAI,EAAE;AAAP,iBAAD,CAAJ;kDACO,K;;;AAEP,qBAAKvB,MAAL,CAAYC,IAAZ,CAAiB,OAAjB;kDACO,K;;;;;;;kDAGJ0B,I;;;;;;;;;;;;;;;;;;;sGAGMD,I;;;;;;;uBACAA,I;;;AAAbC,gBAAAA,I;kDACGA,I;;;;;;;;;;;;;;;;;;;mGAGOD,I;;;;;;AACdA,gBAAAA,IAAI,CAACE,eAAL,GAAqB,KAArB;;uBACiBF,I;;;AAAbC,gBAAAA,I;kDACGA,I;;;;;;;;;;;;;;;;;;;;;AAKf,IAAId,mBAAmB,GAAG,IAAId,WAAJ,EAA1B;AAEA,eAAec,mBAAf;AAEA,OAAO,SAASgB,eAAT,CAAyBC,GAAzB,EAA6B;AAGhCA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAoBnB,mBAApB;AAEH","sourcesContent":["import {api, constant, error_msg} from \"@/main\";\r\nimport {NextErrorRedir} from \"@/router/router_utils\";\r\nimport axios from 'axios';\r\n\r\nclass AuthService{\r\n\r\n    isAuthenticated = false;\r\n\r\n    loginRedirect(){\r\n        this.router.push(\"login\");\r\n    }\r\n\r\n    logout(obj){\r\n\r\n        let logout = axios({\r\n            method: 'delete',\r\n            url: api.api_base_url+api.api_session_path,\r\n        })\r\n\r\n        this.authAxiosNoRed(logout).then(function (res){\r\n            if(res.info.code===200) {\r\n                AuthServiceInstance.isAuthenticated=false;\r\n                if (obj !== undefined) {\r\n                    if (obj.returnTo !== undefined) {\r\n                        this.router.push(obj.returnTo);\r\n                    } else {\r\n                        this.router.push(constant.home_page_name);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    }\r\n\r\n    async routeAuthCheck(next){\r\n        let ax = axios.get(api.api_base_url+api.api_token_check_url);\r\n        try {\r\n            if (await this.authAxios(ax, next)!==undefined) {\r\n                next();\r\n            } else {\r\n                //just in case AuthAxios fails\r\n                next({name: \"login\"});\r\n            }\r\n        }catch (e){\r\n            NextErrorRedir(error_msg.could_not_verify_login.code,error_msg.could_not_verify_login.message,next);\r\n        }\r\n    }\r\n\r\n    async authAxios(axio,next){\r\n        let resp= await axio;\r\n        if(resp.info.code===601){\r\n            if(next!==undefined) {\r\n                next({name: \"login\"});\r\n                return false;\r\n            }else {\r\n                this.router.push(\"login\");\r\n                return false;\r\n            }\r\n        } else\r\n            return resp;\r\n    }\r\n\r\n    async authAxiosNoRed(axio){\r\n        let resp = await axio;\r\n        return resp;\r\n    }\r\n\r\n    async axiosNoCred(axio){\r\n        axio.withCredentials=false;\r\n        let resp = await axio;\r\n        return resp;\r\n    }\r\n\r\n}\r\n\r\nlet AuthServiceInstance = new AuthService();\r\n\r\nexport default AuthServiceInstance;\r\n\r\nexport function initAuthService(vue){\r\n\r\n\r\n    vue.prototype.$auth=AuthServiceInstance;\r\n\r\n}"]}]}