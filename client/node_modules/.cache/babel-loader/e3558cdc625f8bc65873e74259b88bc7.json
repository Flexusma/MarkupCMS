{"remainingRequest":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","dependencies":[{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\src\\auth\\authGuard.js","mtime":1605794143968},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\craft\\OneDrive - willigis-online.de\\Dokumente\\GitKraken\\MarkupCMS\\client\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvY3JhZnQvT25lRHJpdmUgLSB3aWxsaWdpcy1vbmxpbmUuZGUvRG9rdW1lbnRlL0dpdEtyYWtlbi9NYXJrdXBDTVMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICogYXMgYXhpb3MgZnJvbSAiY29yZS1qcy9pbnRlcm5hbHMvaW50ZXJuYWwtc3RhdGUiOwppbXBvcnQgeyBhcGksIGVycm9yX21zZyB9IGZyb20gIkAvbWFpbiI7CmltcG9ydCB7IE5leHRFcnJvclJlZGlyIH0gZnJvbSAiQC9yb3V0ZXIvcm91dGVyX3V0aWxzIjsKCnZhciBBdXRoQXhpb3MgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfQXV0aEF4aW9zID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGF4aW9zLCBuZXh0KSB7CiAgICB2YXIgcmVzcDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBheGlvczsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3AgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgaWYgKCEocmVzcC5pbmZvLmNvZGUgPT09IDYwMSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG5leHQgIT09IHVuZGVmaW5lZCkgbmV4dCh7CiAgICAgICAgICAgICAgbmFtZTogImxvZ2luIgogICAgICAgICAgICB9KTtlbHNlIHRoaXMucm91dGVyLnB1c2goImxvZ2luIik7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlc3ApOwoKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICB9KSk7CgogIGZ1bmN0aW9uIEF1dGhBeGlvcyhfeCwgX3gyKSB7CiAgICByZXR1cm4gX0F1dGhBeGlvcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KCiAgcmV0dXJuIEF1dGhBeGlvczsKfSgpOwoKZXhwb3J0cy5BdXRoQXhpb3MgPSBBdXRoQXhpb3M7CmV4cG9ydCB2YXIgYXV0aEd1YXJkID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodG8sIGZyb20sIG5leHQpIHsKICAgIHZhciBheDsKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGF4ID0gYXhpb3MuZ2V0KGFwaS5hcGlfYmFzZV91cmwgKyBhcGkuYXBpX3Rva2VuX2NoZWNrX3VybCk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICByZXR1cm4gQXV0aEF4aW9zKGF4LCBuZXh0KTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBfY29udGV4dDIudDEgPSB1bmRlZmluZWQ7CgogICAgICAgICAgICBpZiAoIShfY29udGV4dDIudDAgIT09IF9jb250ZXh0Mi50MSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTE7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIC8vanVzdCBpbiBjYXNlIEF1dGhBeGlvcyBmYWlscwogICAgICAgICAgICBuZXh0KHsKICAgICAgICAgICAgICBuYW1lOiAibG9naW4iCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMTM7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MiA9IF9jb250ZXh0MlsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgTmV4dEVycm9yUmVkaXIoZXJyb3JfbXNnLmNvdWxkX25vdF92ZXJpZnlfbG9naW4uY29kZSwgZXJyb3JfbXNnLmNvdWxkX25vdF92ZXJpZnlfbG9naW4ubWVzc2FnZSk7CgogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMSwgMTNdXSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gYXV0aEd1YXJkKF94MywgX3g0LCBfeDUpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpOw=="},{"version":3,"sources":["C:/Users/craft/OneDrive - willigis-online.de/Dokumente/GitKraken/MarkupCMS/client/src/auth/authGuard.js"],"names":["axios","api","error_msg","NextErrorRedir","AuthAxios","next","resp","info","code","undefined","name","router","push","exports","authGuard","to","from","ax","get","api_base_url","api_token_check_url","could_not_verify_login","message"],"mappings":";;AAAA,OAAO,KAAKA,KAAZ,MAAuB,kCAAvB;AACA,SAAQC,GAAR,EAAaC,SAAb,QAA6B,QAA7B;AACA,SAAQC,cAAR,QAA6B,uBAA7B;;AAEA,IAAMC,SAAS;AAAA,2EAAG,iBAAyBJ,KAAzB,EAA+BK,IAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEEL,KAFF;;AAAA;AAEVM,YAAAA,IAFU;;AAAA,kBAGXA,IAAI,CAACC,IAAL,CAAUC,IAAV,KAAiB,GAHN;AAAA;AAAA;AAAA;;AAIV,gBAAGH,IAAI,KAAGI,SAAV,EACIJ,IAAI,CAAC;AAACK,cAAAA,IAAI,EAAC;AAAN,aAAD,CAAJ,CADJ,KAGI,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,OAAjB;AAPM;AAAA;;AAAA;AAAA,6CASPN,IATO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,WAAkBF,SAAlB;AAAA;AAAA;;AAAA,SAAkBA,SAAlB;AAAA,GAAf;;AAcAS,OAAO,CAACT,SAAR,GAAoBA,SAApB;AAGA,OAAO,IAAMU,SAAS;AAAA,qEAAG,kBAAOC,EAAP,EAAWC,IAAX,EAAiBX,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAEfY,YAAAA,EAFe,GAEVjB,KAAK,CAACkB,GAAN,CAAUjB,GAAG,CAACkB,YAAJ,GAAiBlB,GAAG,CAACmB,mBAA/B,CAFU;AAAA;AAAA;AAAA,mBAILhB,SAAS,CAACa,EAAD,EAAKZ,IAAL,CAJJ;;AAAA;AAAA;AAAA,2BAImBI,SAJnB;;AAAA;AAAA;AAAA;AAAA;;AAKXJ,YAAAA,IAAI;AALO;AAAA;;AAAA;AAOX;AACAA,YAAAA,IAAI,CAAC;AAACK,cAAAA,IAAI,EAAE;AAAP,aAAD,CAAJ;;AARW;AAAA;AAAA;;AAAA;AAAA;AAAA;AAWfP,YAAAA,cAAc,CAACD,SAAS,CAACmB,sBAAV,CAAiCb,IAAlC,EAAuCN,SAAS,CAACmB,sBAAV,CAAiCC,OAAxE,CAAd;;AAXe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAATR,SAAS;AAAA;AAAA;AAAA,GAAf","sourcesContent":["import * as axios from \"core-js/internals/internal-state\";\nimport {api, error_msg} from \"@/main\";\nimport {NextErrorRedir} from \"@/router/router_utils\";\n\nconst AuthAxios = async function AuthAxios(axios,next){\n\n    let resp= await axios;\n    if(resp.info.code===601){\n        if(next!==undefined)\n            next({name:\"login\"});\n        else\n            this.router.push(\"login\");\n    } else\n    return resp;\n\n\n}\n\nexports.AuthAxios = AuthAxios;\n\n\nexport const authGuard = async (to, from, next) => {\n\n      let ax = axios.get(api.api_base_url+api.api_token_check_url);\n      try {\n          if (await AuthAxios(ax, next) !== undefined) {\n              next();\n          } else {\n              //just in case AuthAxios fails\n              next({name: \"login\"});\n          }\n      }catch (e){\n          NextErrorRedir(error_msg.could_not_verify_login.code,error_msg.could_not_verify_login.message);\n      }\n\n\n};\n\n"]}]}