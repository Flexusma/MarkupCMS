{"version":3,"sources":["webpack:///./src/views/create/Author_create.vue","webpack:///./src/views/create/Author_create.vue?83af"],"names":["id","class","type","value","title","desc","hero_msg","loaded","undefined","author","opt_name","name","opt_desc","inp_name","inp_desc","opt_img","picture_id","mid","body","buttons","modal_buttons","submitAuthor","error_msg","placeholder","$event","hasAuthorOtherPerm","inp_usr_id","components","Spinner","ImageGalleryPicker","Modal","AdaptiveUserSelect","AdaptiveInput","AuthorDisplay","Hero","methods","AuthorService","createAuthor","res","debug","console","log","data","info","code","appendTo","modal","err_author_create","JSON","stringify","error","hasPermission","user","permission","CREATE_AUTHOR_OTHER","getAuthorByUser","then","styles","action","push","watch","this","render","__scopeId"],"mappings":"gOACWA,GAAG,iB,iCASCC,MAAM,Y,SAEkBA,MAAM,gB,EAM/B,eAAmD,SAA5CA,MAAM,MAAMC,KAAK,SAASC,MAAM,a,kBAKrCF,MAAM,sC,EAEhB,eAAmB,UAAf,cAAU,G,6SAxBlB,eA0BU,UA1BV,EA0BU,CAzBV,eAAsD,GAAhDG,MAAM,wBAAyBC,KAAM,EAAAC,U,iBAC9B,EAAAC,Q,iBAAX,eAmBM,cAlBkBC,IAAT,EAAAC,Q,iBAAX,eAEM,SADJ,eAAgE,GAAhDC,SAAU,EAAAD,OAAOE,KAAOC,SAAU,EAAAH,OAAOJ,M,qDAE3D,eAcM,SAbJ,eAAgF,GAAhEK,SAAU,EAAAG,SAAWD,SAAU,EAAAE,SAAWC,QAAS,EAAAC,Y,0CACnE,eAAkH,GAA3GC,IAAI,sBAAsBb,MAAM,UAAUc,KAAK,kCAAmCC,QAAS,EAAAC,e,oBAClG,eAUM,MAVN,EAUM,CATJ,eAQO,QARI,SAAM,8CAAU,EAAAC,cAAA,EAAAA,aAAA,qBAAY,cAAEpB,MAAM,a,CAC3B,KAAT,EAAAqB,W,iBAAT,eAA+D,IAA/D,EAA+D,eAAf,EAAAA,WAAS,I,sBACzD,eAA4F,GAA7ErB,MAAM,OAAOC,KAAK,OAAOqB,YAAY,OAAQ,cAAY,+BAAE,EAAAV,SAASW,MACnF,eAAyG,GAA1FvB,MAAM,OAAOC,KAAK,OAAOqB,YAAY,oBAAqB,cAAY,+BAAE,EAAAT,SAASU,MAChG,eAAyG,GAArFvB,MAAM,OAAOG,MAAM,+BAAgC,cAAY,+BAAE,EAAAY,WAAWQ,MACtE,EAAAC,oB,iBAA1B,eAA8F,G,MAAhDxB,MAAM,OAAQ,cAAY,+BAAE,EAAAyB,WAAWF,O,sBACrF,eAAuC,SAApC,qBAAkB,eAAE,EAAAE,YAAU,GACjC,G,8BAKV,eAGM,MAHN,EAGM,CAFJ,eAAU,GACV,U,iLAmBS,GACff,KAAM,gBACJgB,WAAY,CAACC,UAAA,KAASC,qBAAA,KAAoBC,QAAA,KAAOC,qBAAA,KAAoBC,gBAAA,KAAeC,gBAAA,KAAeC,OAAA,MACnGC,QAAQ,CACEd,aADF,WACiB,8KACHe,EAAA,KAAcC,aAAa,EAAKxB,SAAS,EAAKC,SAAS,EAAKY,WAAW,EAAKV,YADzE,OACfsB,EADe,OAEhB,cAASC,OACZC,QAAQC,IAAIH,GACY,MAArBA,EAAII,KAAKC,KAAKC,KACf,IAAE,wBAAwBC,SAAS,QAAQC,MAAM,QAEjD,EAAKxB,UAAU,UAAKyB,kBAAkBC,KAAKC,UAAUX,EAAII,KAAKQ,OAP7C,8CAUvBzB,mBAXM,WAYF,OAAO,OAAW0B,cAAc,OAAoBC,KAAKC,WAAW,OAAWC,uBAGrFZ,KAlBa,WAkBP,WAWJ,OAVAN,EAAA,KAAcmB,gBAAgB,OAAoBH,KAAKpD,IAAIwD,MAAK,SAAClB,GAC5D,cAASC,OACZC,QAAQC,IAAIH,GACO,MAAhBA,EAAIK,KAAKC,OACV,EAAKnC,OAAO6B,EAAII,KAChB,EAAKpC,SAAS,uCAEhB,EAAKC,QAAO,KAGR,CACJM,SAAU,GACVC,SAAU,GACVY,WAAY,OAAoB0B,KAAKpD,GACrCgB,gBAAYR,EACZc,UAAW,GACXhB,SAAS,cACTC,QAAQ,EACRE,YAAQD,EACRY,cAAc,CACZ,CACEhB,MAAO,KACPqD,OAAQ,cACRC,OAAQ,WACN,OAAoBC,KAAK,aAMnCC,MAAM,CACJ5C,WAAY,WAAe,cAASuB,OAAMC,QAAQC,IAAIoB,KAAK7C,eC3F/D,EAAO8C,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-2d0f1183.ec8aae0c.js","sourcesContent":["<template>\r\n  <section id=\"author-create\">\r\n  <Hero title=\"Create Author Profile\" :desc=\"hero_msg\"/>\r\n    <div v-if=\"loaded\">\r\n        <div v-if=\"author!==undefined\">\r\n          <AuthorDisplay :opt_name=\"author.name\" :opt_desc=\"author.desc\"/>\r\n        </div>\r\n        <div v-else>\r\n          <AuthorDisplay :opt_name=\"inp_name\" :opt_desc=\"inp_desc\" :opt_img=\"picture_id\"/>\r\n          <Modal mid=\"author-create-modal\" title=\"Success\" body=\"Author was created successfully\" :buttons=\"modal_buttons\"/>\r\n          <div class=\"card m-3\">\r\n            <form v-on:submit.prevent=\"submitAuthor\" class=\"card-body\">\r\n              <p v-if=\"error_msg!==''\" class=\"badge-danger\">{{error_msg}}</p>\r\n              <AdaptiveInput class=\"mt-3\" type=\"text\" placeholder=\"Name\" @value-change=\"inp_name=$event\"/>\r\n              <AdaptiveInput class=\"mt-3\" type=\"text\" placeholder=\"Short description\" @value-change=\"inp_desc=$event\"/>\r\n              <ImageGalleryPicker class=\"mt-3\" title=\"Profilbild wÃ¤hlen (optional)\" @value-change=\"picture_id=$event\"/>\r\n              <AdaptiveUserSelect v-if=\"hasAuthorOtherPerm\" class=\"mt-3\" @value-change=\"inp_usr_id=$event\"/>\r\n              <p>Selected user ID: {{inp_usr_id}}</p>\r\n              <input class=\"m-0\" type=\"submit\" value=\"Speichern\">\r\n            </form>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <div v-else class=\"align-items-center p-3 text-center\">\r\n      <Spinner/>\r\n      <h1>Loading...</h1>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport Hero from \"@/components/partials/Hero\";\r\nimport AuthorDisplay from \"@/components/AuthorDisplay\";\r\nimport AdaptiveInput from \"@/components/partials/AdaptiveInput\";\r\nimport AdaptiveUserSelect from \"@/components/partials/AdaptiveUserSelect\";\r\nimport AuthorService from \"@/services/AuthorService\";\r\nimport Modal from \"@/components/Modal\";\r\nimport $ from 'jquery';\r\nimport {constant, lang} from \"@/main\";\r\nimport AuthServiceInstance from \"@/auth/authService\";\r\nimport ImageGalleryPicker from \"@/components/partials/ImageGalleryPicker\";\r\nimport Permission from \"@/auth/permission\";\r\nimport Spinner from \"@/components/partials/Spinner\";\r\n\r\nexport default {\r\nname: \"Author_create\",\r\n  components: {Spinner, ImageGalleryPicker, Modal, AdaptiveUserSelect, AdaptiveInput, AuthorDisplay, Hero},\r\n  methods:{\r\n      async submitAuthor() {\r\n        let res = await AuthorService.createAuthor(this.inp_name,this.inp_desc,this.inp_usr_id,this.picture_id);\r\n        if(constant.debug)\r\n        console.log(res)\r\n        if(res.data.info.code===200){\r\n          $('#author-create-modal').appendTo(\"body\").modal('show');\r\n        }else{\r\n          this.error_msg=lang.err_author_create+JSON.stringify(res.data.error);\r\n        }\r\n      },\r\n    hasAuthorOtherPerm(){\r\n        return Permission.hasPermission(AuthServiceInstance.user.permission,Permission.CREATE_AUTHOR_OTHER);\r\n    }\r\n  },\r\n  data(){\r\n    AuthorService.getAuthorByUser(AuthServiceInstance.user.id).then((res) => {\r\n      if(constant.debug)\r\n      console.log(res);\r\n      if(res.info.code===200){\r\n        this.author=res.data;\r\n        this.hero_msg=\"You already have an author profile.\"\r\n      }\r\n      this.loaded=true;\r\n    });\r\n\r\n    return{\r\n      inp_name: \"\",\r\n      inp_desc: \"\",\r\n      inp_usr_id: AuthServiceInstance.user.id,\r\n      picture_id: undefined,\r\n      error_msg: \"\",\r\n      hero_msg:\"Go ahead...\",\r\n      loaded: false,\r\n      author: undefined,\r\n      modal_buttons:[\r\n        {\r\n          title: \"Ok\",\r\n          styles: \"btn-success\",\r\n          action: function (){\r\n            AuthServiceInstance.push('home');\r\n          }\r\n        }\r\n      ],\r\n    }\r\n  },\r\n  watch:{\r\n    picture_id: function() {if(constant.debug)console.log(this.picture_id)},\r\n  }\r\n\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./Author_create.vue?vue&type=template&id=9114e45e&scoped=true\"\nimport script from \"./Author_create.vue?vue&type=script&lang=js\"\nexport * from \"./Author_create.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-9114e45e\"\n\nexport default script"],"sourceRoot":""}