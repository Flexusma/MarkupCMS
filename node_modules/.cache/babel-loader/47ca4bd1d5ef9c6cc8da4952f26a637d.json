{"remainingRequest":"B:\\Gitkraken\\MarkupCMS\\node_modules\\babel-loader\\lib\\index.js!B:\\Gitkraken\\MarkupCMS\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!B:\\Gitkraken\\MarkupCMS\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!B:\\Gitkraken\\MarkupCMS\\src\\views\\create\\Author_create.vue?vue&type=script&lang=js","dependencies":[{"path":"B:\\Gitkraken\\MarkupCMS\\src\\views\\create\\Author_create.vue","mtime":1610356668824},{"path":"B:\\Gitkraken\\MarkupCMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\Gitkraken\\MarkupCMS\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"B:\\Gitkraken\\MarkupCMS\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"B:\\Gitkraken\\MarkupCMS\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQjovR2l0a3Jha2VuL01hcmt1cENNUy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBIZXJvIGZyb20gIkAvY29tcG9uZW50cy9wYXJ0aWFscy9IZXJvIjsKaW1wb3J0IEF1dGhvckRpc3BsYXkgZnJvbSAiQC9jb21wb25lbnRzL0F1dGhvckRpc3BsYXkiOwppbXBvcnQgQWRhcHRpdmVJbnB1dCBmcm9tICJAL2NvbXBvbmVudHMvcGFydGlhbHMvQWRhcHRpdmVJbnB1dCI7CmltcG9ydCBBZGFwdGl2ZVVzZXJTZWxlY3QgZnJvbSAiQC9jb21wb25lbnRzL3BhcnRpYWxzL0FkYXB0aXZlVXNlclNlbGVjdCI7CmltcG9ydCBBdXRob3JTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvQXV0aG9yU2VydmljZSI7CmltcG9ydCBNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvTW9kYWwiOwppbXBvcnQgJCBmcm9tICdqcXVlcnknOwppbXBvcnQgeyBjb25zdGFudCwgbGFuZyB9IGZyb20gIkAvbWFpbiI7CmltcG9ydCBBdXRoU2VydmljZUluc3RhbmNlIGZyb20gIkAvYXV0aC9hdXRoU2VydmljZSI7CmltcG9ydCBJbWFnZUdhbGxlcnlQaWNrZXIgZnJvbSAiQC9jb21wb25lbnRzL3BhcnRpYWxzL0ltYWdlR2FsbGVyeVBpY2tlciI7CmltcG9ydCBQZXJtaXNzaW9uIGZyb20gIkAvYXV0aC9wZXJtaXNzaW9uIjsKaW1wb3J0IFNwaW5uZXIgZnJvbSAiQC9jb21wb25lbnRzL3BhcnRpYWxzL1NwaW5uZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkF1dGhvcl9jcmVhdGUiLAogIGNvbXBvbmVudHM6IHsKICAgIFNwaW5uZXI6IFNwaW5uZXIsCiAgICBJbWFnZUdhbGxlcnlQaWNrZXI6IEltYWdlR2FsbGVyeVBpY2tlciwKICAgIE1vZGFsOiBNb2RhbCwKICAgIEFkYXB0aXZlVXNlclNlbGVjdDogQWRhcHRpdmVVc2VyU2VsZWN0LAogICAgQWRhcHRpdmVJbnB1dDogQWRhcHRpdmVJbnB1dCwKICAgIEF1dGhvckRpc3BsYXk6IEF1dGhvckRpc3BsYXksCiAgICBIZXJvOiBIZXJvCiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJtaXRBdXRob3I6IGZ1bmN0aW9uIHN1Ym1pdEF1dGhvcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBBdXRob3JTZXJ2aWNlLmNyZWF0ZUF1dGhvcihfdGhpcy5pbnBfbmFtZSwgX3RoaXMuaW5wX2Rlc2MsIF90aGlzLmlucF91c3JfaWQsIF90aGlzLnBpY3R1cmVfaWQpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgaWYgKGNvbnN0YW50LmRlYnVnKSBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICAgICAgICAgIGlmIChyZXMuZGF0YS5pbmZvLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICAkKCcjYXV0aG9yLWNyZWF0ZS1tb2RhbCcpLm1vZGFsKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpcy5lcnJvcl9tc2cgPSBsYW5nLmVycl9hdXRob3JfY3JlYXRlICsgSlNPTi5zdHJpbmdpZnkocmVzLmRhdGEuZXJyb3IpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgaGFzQXV0aG9yT3RoZXJQZXJtOiBmdW5jdGlvbiBoYXNBdXRob3JPdGhlclBlcm0oKSB7CiAgICAgIHJldHVybiBQZXJtaXNzaW9uLmhhc1Blcm1pc3Npb24oQXV0aFNlcnZpY2VJbnN0YW5jZS51c2VyLnBlcm1pc3Npb24sIFBlcm1pc3Npb24uQ1JFQVRFX0FVVEhPUl9PVEhFUik7CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgQXV0aG9yU2VydmljZS5nZXRBdXRob3JCeVVzZXIoQXV0aFNlcnZpY2VJbnN0YW5jZS51c2VyLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKGNvbnN0YW50LmRlYnVnKSBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgaWYgKHJlcy5pbmZvLmNvZGUgPT09IDIwMCkgewogICAgICAgIF90aGlzMi5hdXRob3IgPSByZXMuZGF0YTsKICAgICAgICBfdGhpczIuaGVyb19tc2cgPSAiWW91IGFscmVhZHkgaGF2ZSBhbiBhdXRob3IgcHJvZmlsZS4iOwogICAgICB9CgogICAgICBfdGhpczIubG9hZGVkID0gdHJ1ZTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgaW5wX25hbWU6ICIiLAogICAgICBpbnBfZGVzYzogIiIsCiAgICAgIGlucF91c3JfaWQ6IEF1dGhTZXJ2aWNlSW5zdGFuY2UudXNlci5pZCwKICAgICAgcGljdHVyZV9pZDogdW5kZWZpbmVkLAogICAgICBlcnJvcl9tc2c6ICIiLAogICAgICBoZXJvX21zZzogIkdvIGFoZWFkLi4uIiwKICAgICAgbG9hZGVkOiBmYWxzZSwKICAgICAgYXV0aG9yOiB1bmRlZmluZWQsCiAgICAgIG1vZGFsX2J1dHRvbnM6IFt7CiAgICAgICAgdGl0bGU6ICJPayIsCiAgICAgICAgc3R5bGVzOiAiYnRuLXN1Y2Nlc3MiLAogICAgICAgIGFjdGlvbjogZnVuY3Rpb24gYWN0aW9uKCkgewogICAgICAgICAgQXV0aFNlcnZpY2VJbnN0YW5jZS5wdXNoKCdob21lJyk7CiAgICAgICAgfQogICAgICB9XQogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBwaWN0dXJlX2lkOiBmdW5jdGlvbiBwaWN0dXJlX2lkKCkgewogICAgICBpZiAoY29uc3RhbnQuZGVidWcpIGNvbnNvbGUubG9nKHRoaXMucGljdHVyZV9pZCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["B:\\Gitkraken\\MarkupCMS\\src\\views\\create\\Author_create.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <section id=\"author-create\">\r\n  <Hero title=\"Create Author Profile\" :desc=\"hero_msg\"/>\r\n    <div v-if=\"loaded\">\r\n        <div v-if=\"author!==undefined\">\r\n          <AuthorDisplay :opt_name=\"author.name\" :opt_desc=\"author.desc\"/>\r\n        </div>\r\n        <div v-else>\r\n          <AuthorDisplay :opt_name=\"inp_name\" :opt_desc=\"inp_desc\" :opt_img=\"picture_id\"/>\r\n          <Modal mid=\"author-create-modal\" title=\"Success\" body=\"Author was created successfully\" :buttons=\"modal_buttons\"/>\r\n          <div class=\"card m-3\">\r\n            <form v-on:submit.prevent=\"submitAuthor\" class=\"card-body\">\r\n              <p v-if=\"error_msg!==''\" class=\"badge-danger\">{{error_msg}}</p>\r\n              <AdaptiveInput class=\"mt-3\" type=\"text\" placeholder=\"Name\" @value-change=\"inp_name=$event\"/>\r\n              <AdaptiveInput class=\"mt-3\" type=\"text\" placeholder=\"Short description\" @value-change=\"inp_desc=$event\"/>\r\n              <ImageGalleryPicker class=\"mt-3\" title=\"Profilbild wÃ¤hlen (optional)\" @value-change=\"picture_id=$event\"/>\r\n              <AdaptiveUserSelect v-if=\"hasAuthorOtherPerm\" class=\"mt-3\" @value-change=\"inp_usr_id=$event\"/>\r\n              <p>Selected user ID: {{inp_usr_id}}</p>\r\n              <input class=\"m-0\" type=\"submit\" value=\"Speichern\">\r\n            </form>\r\n          </div>\r\n        </div>\r\n    </div>\r\n    <div v-else class=\"align-items-center p-3 text-center\">\r\n      <Spinner/>\r\n      <h1>Loading...</h1>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport Hero from \"@/components/partials/Hero\";\r\nimport AuthorDisplay from \"@/components/AuthorDisplay\";\r\nimport AdaptiveInput from \"@/components/partials/AdaptiveInput\";\r\nimport AdaptiveUserSelect from \"@/components/partials/AdaptiveUserSelect\";\r\nimport AuthorService from \"@/services/AuthorService\";\r\nimport Modal from \"@/components/Modal\";\r\nimport $ from 'jquery';\r\nimport {constant, lang} from \"@/main\";\r\nimport AuthServiceInstance from \"@/auth/authService\";\r\nimport ImageGalleryPicker from \"@/components/partials/ImageGalleryPicker\";\r\nimport Permission from \"@/auth/permission\";\r\nimport Spinner from \"@/components/partials/Spinner\";\r\n\r\nexport default {\r\nname: \"Author_create\",\r\n  components: {Spinner, ImageGalleryPicker, Modal, AdaptiveUserSelect, AdaptiveInput, AuthorDisplay, Hero},\r\n  methods:{\r\n      async submitAuthor() {\r\n        let res = await AuthorService.createAuthor(this.inp_name,this.inp_desc,this.inp_usr_id,this.picture_id);\r\n        if(constant.debug)\r\n        console.log(res)\r\n        if(res.data.info.code===200){\r\n          $('#author-create-modal').modal();\r\n        }else{\r\n          this.error_msg=lang.err_author_create+JSON.stringify(res.data.error);\r\n        }\r\n      },\r\n    hasAuthorOtherPerm(){\r\n        return Permission.hasPermission(AuthServiceInstance.user.permission,Permission.CREATE_AUTHOR_OTHER);\r\n    }\r\n  },\r\n  data(){\r\n    AuthorService.getAuthorByUser(AuthServiceInstance.user.id).then((res) => {\r\n      if(constant.debug)\r\n      console.log(res);\r\n      if(res.info.code===200){\r\n        this.author=res.data;\r\n        this.hero_msg=\"You already have an author profile.\"\r\n      }\r\n      this.loaded=true;\r\n    });\r\n\r\n    return{\r\n      inp_name: \"\",\r\n      inp_desc: \"\",\r\n      inp_usr_id: AuthServiceInstance.user.id,\r\n      picture_id: undefined,\r\n      error_msg: \"\",\r\n      hero_msg:\"Go ahead...\",\r\n      loaded: false,\r\n      author: undefined,\r\n      modal_buttons:[\r\n        {\r\n          title: \"Ok\",\r\n          styles: \"btn-success\",\r\n          action: function (){\r\n            AuthServiceInstance.push('home');\r\n          }\r\n        }\r\n      ],\r\n    }\r\n  },\r\n  watch:{\r\n    picture_id: function() {if(constant.debug)console.log(this.picture_id)},\r\n  }\r\n\r\n\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":""}]}